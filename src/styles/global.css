@import 'tailwindcss';

@layer base, starlight, theme, components, utilities;

@import '@astrojs/starlight-tailwind';
@import 'tailwindcss/theme.css' layer(theme);
@import 'tailwindcss/utilities.css' layer(utilities);

:root {
  font-family: 'Inter', sans-serif;
  /* Dark mode (default) */
  background-color: #12171b;
  color: #eee;

  /* Dark mode color variables */
  --color-dark-100: #12171b;
  --color-dark-50: #171e22;
  --color-dark-footer: #0d1012;
  --color-primary-100: #3783c4;
  --color-primary-75: #69a2d3;
  --color-primary-50: #9bc1e1;
  --color-primary-25: #cde0f0;
  --color-accent-100: #e77e5b;
  --color-accent-75: #ed9e84;
  --color-accent-50: #f3bfad;
  --color-accent-25: #f9dfd6;
  --color-stroke: #28353c;
  --color-text-primary: #ffffff;
  --color-text-secondary: rgba(255, 255, 255, 0.9);
  --color-text-tertiary: rgba(255, 255, 255, 0.8);
}

:root[data-theme='light'] {
  /* Light mode */
  background-color: #ffffff;
  color: #1a1a1a;

  /* Light mode color variables */
  --color-dark-100: #ffffff;
  --color-dark-50: #f5f7fa;
  --color-dark-footer: #f0f2f5;
  --color-primary-100: #3783c4;
  --color-primary-75: #69a2d3;
  --color-primary-50: #9bc1e1;
  --color-primary-25: #cde0f0;
  --color-accent-100: #e77e5b;
  --color-accent-75: #ed9e84;
  --color-accent-50: #f3bfad;
  --color-accent-25: #f9dfd6;
  --color-stroke: #e5e7eb;
  --color-text-primary: #1a1a1a;
  --color-text-secondary: rgba(26, 26, 26, 0.9);
  --color-text-tertiary: rgba(26, 26, 26, 0.8);
}

@theme {
  /* Tailwind theme variables - these reference the CSS custom properties */
  --color-dark-100: var(--color-dark-100);
  --color-dark-50: var(--color-dark-50);
  --color-dark-footer: var(--color-dark-footer);
  --color-primary-100: var(--color-primary-100);
  --color-primary-75: var(--color-primary-75);
  --color-primary-50: var(--color-primary-50);
  --color-primary-25: var(--color-primary-25);
  --color-accent-100: var(--color-accent-100);
  --color-accent-75: var(--color-accent-75);
  --color-accent-50: var(--color-accent-50);
  --color-accent-25: var(--color-accent-25);
  --color-stroke: var(--color-stroke);
  --color-text-primary: var(--color-text-primary);
  --color-text-secondary: var(--color-text-secondary);
  --color-text-tertiary: var(--color-text-tertiary);
}

/* Theme-aware utility classes */
@layer utilities {
  .text-theme-primary {
    color: var(--color-text-primary);
  }

  .text-theme-secondary {
    color: var(--color-text-secondary);
  }

  .text-theme-tertiary {
    color: var(--color-text-tertiary);
  }
}

/* Reduce gap between page title and first content paragraph */
.sl-markdown-content {
  margin-top: 0 !important;
}

.content-panel > :first-child {
  margin-top: 0 !important;
}

/* Target Starlight's header/title area */
header.sl-markdown-content,
.sl-markdown-content > :first-child {
  margin-top: 0 !important;
}

/* Reduce the content area top margin */
[data-pagefind-body] {
  margin-top: 0.5rem !important;
}

@layer starlight {
  /* 
   * Restore browser default styles for markdown content that were removed by Tailwind's preflight.
   */

  /* Lists - restore default bullets, numbers, and padding */
  .sl-markdown-content :is(ul, ol):not(:where(.not-content *)) {
    list-style: revert;
    padding-inline-start: revert;
  }

  /* Text emphasis - restore bold and italic */
  .sl-markdown-content :is(strong, b):not(:where(.not-content *)) {
    font-weight: revert;
  }

  .sl-markdown-content :is(em, i):not(:where(.not-content *)) {
    font-style: revert;
  }

  /* Restore browser defaults for other semantic HTML elements */
  .sl-markdown-content
    :is(abbr, sub, sup, small, mark):not(:where(.not-content *)) {
    all: revert;
  }
}

/* Style for Support link in header */
.support-header-link {
  color: var(--sl-color-text);
  text-decoration: none;
  font-size: 0.875rem;
  margin-left: 0.75rem;
  padding: 0.5rem 0.75rem;
  border-radius: 0.375rem;
  transition: color 0.2s;
}

.support-header-link:hover {
  color: var(--sl-color-accent);
}

/* Position theme selector on the right side of the header */
:global(.sl-header-actions) {
  display: flex !important;
  align-items: center;
  gap: 0.5rem;
}

:global(.theme-select-wrapper) {
  margin-left: auto;
}

/* Hide right sidebar container and panel on Support page */
:global(body[data-slug='/support/'] .right-sidebar-container),
:global(body[data-slug='/support'] .right-sidebar-container),
:global(body[data-slug='/support/'] .right-sidebar),
:global(body[data-slug='/support'] .right-sidebar),
:global(body[data-slug='/support/'] .right-sidebar-panel),
:global(body[data-slug='/support'] .right-sidebar-panel),
:global(body[data-slug='/support/'] aside.right-sidebar-container),
:global(body[data-slug='/support'] aside.right-sidebar-container) {
  display: none !important;
  width: 0 !important;
  padding: 0 !important;
  margin: 0 !important;
  flex: 0 0 0 !important;
}

/* Adjust main content to use more width when sidebar is hidden */
:global(body[data-slug='/support/'] .main-pane),
:global(body[data-slug='/support'] .main-pane) {
  width: 100% !important;
  max-width: 100% !important;
}

/* Remove the margin that's applied when TOC is present */
:global(
  body[data-slug='/support/'] [data-has-sidebar][data-has-toc] .main-pane
),
:global(
  body[data-slug='/support'] [data-has-sidebar][data-has-toc] .main-pane
) {
  --sl-content-margin-inline: auto !important;
  width: 100% !important;
}

/* Increase content width and reduce padding on Support page */
:global(body[data-slug='/support/'] .content-panel),
:global(body[data-slug='/support'] .content-panel) {
  padding-left: 2rem !important;
  padding-right: 2rem !important;
}

:global(body[data-slug='/support/'] .sl-container),
:global(body[data-slug='/support'] .sl-container) {
  max-width: 90rem !important; /* Much wider than default 45rem */
  margin-inline: auto !important;
}

@media (min-width: 72rem) {
  :global(body[data-slug='/support/'] .sl-container),
  :global(body[data-slug='/support'] .sl-container) {
    max-width: 90rem !important;
    margin-inline: auto !important;
  }
}

@keyframes fadeIn {
  from {
    opacity: 0;
    transform: translateY(4px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* Collapsible filter sections */
details[open] summary svg {
  transform: rotate(-90deg);
}

details summary::-webkit-details-marker {
  display: none;
}

details summary::marker {
  display: none;
}

/* Hide scrollbar for horizontal scrolling on mobile */
.scrollbar-hide {
  -ms-overflow-style: none; /* IE and Edge */
  scrollbar-width: none; /* Firefox */
}

.scrollbar-hide::-webkit-scrollbar {
  display: none; /* Chrome, Safari and Opera */
}
